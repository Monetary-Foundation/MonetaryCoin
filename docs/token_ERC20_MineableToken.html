<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>MineableToken · MonetaryCoin</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="MineableToken · MonetaryCoin"/><meta property="og:type" content="website"/><meta property="og:url" content="https://monetary-foundation.github.io/MonetaryCoin/index.html"/><meta property="og:description" content="&lt;div class=&quot;contract-doc&quot;&gt;&lt;div class=&quot;contract&quot;&gt;&lt;h2 class=&quot;contract-header&quot;&gt;&lt;span class=&quot;contract-kind&quot;&gt;contract&lt;/span&gt; MineableToken&lt;/h2&gt;&lt;p class=&quot;base-contracts&quot;&gt;&lt;span&gt;is&lt;/span&gt; &lt;a href=&quot;token_ERC20_MintableToken.html&quot;&gt;MintableToken&lt;/a&gt;&lt;/p&gt;&lt;p class=&quot;description&quot;&gt;ERC20 Token with Pos mining. The blockReward_ is controlled by a GDP oracle. This type of mining will be used during initial distribution period and when the growth is positive. For mining during negative growth period refer to MineableM5Token.sol Unlike standard erc20 token, the totalSupply is sum(all user balances) + totalStake instead of sum(all user balances).&lt;/p&gt;&lt;div class=&quot;source&quot;&gt;Source: &lt;a href=&quot;https://github.com/Monetary-Foundation/MonetaryCoin/blob/v1.0.0/contracts/token/ERC20/MineableToken.sol&quot; target=&quot;_blank&quot;&gt;token/ERC20/MineableToken.sol&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;index&quot;&gt;&lt;h2&gt;Index&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;token_ERC20_MineableToken.html#Commit&quot;&gt;Commit&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;token_ERC20_MineableToken.html#Withdraw&quot;&gt;Withdraw&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;token_ERC20_MineableToken.html#average&quot;&gt;average&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;token_ERC20_MineableToken.html#blockReward&quot;&gt;blockReward&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;token_ERC20_MineableToken.html#commit&quot;&gt;commit&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;token_ERC20_MineableToken.html#commitmentOf&quot;&gt;commitmentOf&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;token_ERC20_MineableToken.html#getCommitment&quot;&gt;getCommitment&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;token_ERC20_MineableToken.html#getReward&quot;&gt;getReward&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;token_ERC20_MineableToken.html#signedAverage&quot;&gt;signedAverage&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;token_ERC20_MineableToken.html#totalStake&quot;&gt;totalStake&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;token_ERC20_MineableToken.html#withdraw&quot;&gt;withdraw&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div class=&quot;reference&quot;&gt;&lt;h2&gt;Reference&lt;/h2&gt;&lt;div class=&quot;events&quot;&gt;&lt;h3&gt;Events&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;&lt;div class=&quot;item event&quot;&gt;&lt;span id=&quot;Commit&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;Commit&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;event &lt;strong&gt;Commit&lt;/strong&gt;&lt;span&gt;(address from, uint value, uint atStake, int onBlockReward) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;from&lt;/code&gt; - address&lt;/div&gt;&lt;div&gt;&lt;code&gt;value&lt;/code&gt; - uint&lt;/div&gt;&lt;div&gt;&lt;code&gt;atStake&lt;/code&gt; - uint&lt;/div&gt;&lt;div&gt;&lt;code&gt;onBlockReward&lt;/code&gt; - int&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item event&quot;&gt;&lt;span id=&quot;Withdraw&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;Withdraw&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;event &lt;strong&gt;Withdraw&lt;/strong&gt;&lt;span&gt;(address from, uint reward, uint commitment) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;from&lt;/code&gt; - address&lt;/div&gt;&lt;div&gt;&lt;code&gt;reward&lt;/code&gt; - uint&lt;/div&gt;&lt;div&gt;&lt;code&gt;commitment&lt;/code&gt; - uint&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div class=&quot;functions&quot;&gt;&lt;h3&gt;Functions&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;average&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;average&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;average&lt;/strong&gt;&lt;span&gt;(uint256 a, uint256 b) &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;pure &lt;/span&gt;&lt;span&gt;returns  (uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Calculate the average of two integer numbers, 1.5 will be rounded toward zero.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;a&lt;/code&gt; - uint256&lt;/div&gt;&lt;div&gt;&lt;code&gt;b&lt;/code&gt; - uint256&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;An uint256 representing integer average&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;blockReward&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;blockReward&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;blockReward&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (int256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;The block reward.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;the current block reward&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;commit&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;commit&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;commit&lt;/strong&gt;&lt;span&gt;(uint256 _value) &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;returns  (uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Commit _value for minning, the _value will be substructed from user balance and added to the stake. if user previously commited, add to an existing commitment. this is done by calling withdraw() then commit back previous commit + reward + new commit.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_value&lt;/code&gt; - The amount to be commited.&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;the commit value: _value OR prevCommit + reward + _value&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;commitmentOf&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;commitmentOf&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;commitmentOf&lt;/strong&gt;&lt;span&gt;(address _miner) &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Gets the commitment of the specified address.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_miner&lt;/code&gt; - The address to query the the commitment Of&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;the amount commited.&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;getCommitment&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;getCommitment&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;getCommitment&lt;/strong&gt;&lt;span&gt;(address _miner) &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (uint256, uint256, uint256, int256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Gets the all fields for the commitment of the specified address.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_miner&lt;/code&gt; - The address to query the the commitment Of&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;{ &amp;quot;uint256 value&amp;quot;: the amount commited. &amp;quot;uint256 onBlockNumber&amp;quot;: block number of commitment. &amp;quot;uint256 atStake&amp;quot;: stake when commited. &amp;quot;int256 onBlockReward&amp;quot;: block reward when commited. }&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;getReward&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;getReward&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;getReward&lt;/strong&gt;&lt;span&gt;(address _miner) &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Calculate the reward if withdraw() happans on this block, The reward is calculated by the formula: (numberOfBlocks) * (effectiveBlockReward) * (commitment.value) / (effectiveStake) effectiveBlockReward is the average between the block reward during commit and the block reward during the call effectiveStake is the average between the stake during the commit and the stake during call (liniar aproximation).&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_miner&lt;/code&gt; - address&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;An uint256 representing the reward amount&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;signedAverage&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;signedAverage&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;signedAverage&lt;/strong&gt;&lt;span&gt;(int256 a, int256 b) &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;pure &lt;/span&gt;&lt;span&gt;returns  (int256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Calculate the average of two signed integers numbers, 1.5 will be toward zero.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;a&lt;/code&gt; - int256&lt;/div&gt;&lt;div&gt;&lt;code&gt;b&lt;/code&gt; - int256&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;An int256 representing integer average&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;totalStake&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;totalStake&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;totalStake&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;The total stake.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;the total stake&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;withdraw&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;withdraw&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;withdraw&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;returns  (uint256, uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Withdraw reward.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;{ &amp;quot;uint256 reward&amp;quot;: the new supply &amp;quot;uint256 commitmentValue&amp;quot;: the commitment to be returned }&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/MonetaryCoin/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:100,200,300,400,500,700,400italic,700italic"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/MonetaryCoin/css/main.css"/></head><body class="sideNavVisible doc"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/MonetaryCoin/"><img class="logo" src="/MonetaryCoin/img/logo-monetarycoin.png" alt="MonetaryCoin"/><h2 class="headerTitleWithLogo">MonetaryCoin</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="https://monetary.org" target="_self">Home</a></li><li class=""><a href="/MonetaryCoin/docs/monetarycoin.html" target="_self">Docs</a></li><li class="siteNavGroupActive"><a href="/MonetaryCoin/docs/deploy_MCoin.html" target="_self">API</a></li><li class=""><a href="https://github.com/Monetary-Foundation/MonetaryCoin" target="_self">Github</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>TOKEN / ERC20</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>DEPLOY</h3><ul><li class="navListItem"><a class="navItem" href="/MonetaryCoin/docs/deploy_MCoin.html">MCoin</a></li><li class="navListItem"><a class="navItem" href="/MonetaryCoin/docs/deploy_MCoinDistributionWrap.html">MCoinDistributionWrap</a></li></ul></div><div class="navGroup navGroupActive"><h3>DISTRIBUTION</h3><ul><li class="navListItem"><a class="navItem" href="/MonetaryCoin/docs/distribution_MCoinDistribution.html">MCoinDistribution</a></li></ul></div><div class="navGroup navGroupActive"><h3>MATH</h3><ul><li class="navListItem"><a class="navItem" href="/MonetaryCoin/docs/math_SafeMath.html">SafeMath</a></li></ul></div><div class="navGroup navGroupActive"><h3>OWNERSHIP</h3><ul><li class="navListItem"><a class="navItem" href="/MonetaryCoin/docs/ownership_Claimable.html">Claimable</a></li><li class="navListItem"><a class="navItem" href="/MonetaryCoin/docs/ownership_Ownable.html">Ownable</a></li></ul></div><div class="navGroup navGroupActive"><h3>STORAGE</h3><ul><li class="navListItem"><a class="navItem" href="/MonetaryCoin/docs/storage_ComplianceStore.html">ComplianceStore</a></li><li class="navListItem"><a class="navItem" href="/MonetaryCoin/docs/storage_MultihashStore.html">MultihashStore</a></li></ul></div><div class="navGroup navGroupActive"><h3>TOKEN / ERC20</h3><ul><li class="navListItem"><a class="navItem" href="/MonetaryCoin/docs/token_ERC20_BasicToken.html">BasicToken</a></li><li class="navListItem"><a class="navItem" href="/MonetaryCoin/docs/token_ERC20_BurnableToken.html">BurnableToken</a></li><li class="navListItem"><a class="navItem" href="/MonetaryCoin/docs/token_ERC20_ERC20.html">ERC20</a></li><li class="navListItem"><a class="navItem" href="/MonetaryCoin/docs/token_ERC20_ERC20Basic.html">ERC20Basic</a></li><li class="navListItem"><a class="navItem" href="/MonetaryCoin/docs/token_ERC20_GDPOraclizedToken.html">GDPOraclizedToken</a></li><li class="navListItem"><a class="navItem" href="/MonetaryCoin/docs/token_ERC20_MineableM5Token.html">MineableM5Token</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/MonetaryCoin/docs/token_ERC20_MineableToken.html">MineableToken</a></li><li class="navListItem"><a class="navItem" href="/MonetaryCoin/docs/token_ERC20_MintableToken.html">MintableToken</a></li><li class="navListItem"><a class="navItem" href="/MonetaryCoin/docs/token_ERC20_StandardToken.html">StandardToken</a></li></ul></div><div class="navGroup navGroupActive"><h3>UNCATEGORIZED</h3><ul><li class="navListItem"><a class="navItem" href="/MonetaryCoin/docs/Migrations.html">Migrations</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1>MineableToken</h1></header><article><div><span><div class="contract-doc"><div class="contract"><h2 class="contract-header"><span class="contract-kind">contract</span> MineableToken</h2><p class="base-contracts"><span>is</span> <a href="token_ERC20_MintableToken.html">MintableToken</a></p><p class="description">ERC20 Token with Pos mining. The blockReward_ is controlled by a GDP oracle. This type of mining will be used during initial distribution period and when the growth is positive. For mining during negative growth period refer to MineableM5Token.sol Unlike standard erc20 token, the totalSupply is sum(all user balances) + totalStake instead of sum(all user balances).</p><div class="source">Source: <a href="https://github.com/Monetary-Foundation/MonetaryCoin/blob/v1.0.0/contracts/token/ERC20/MineableToken.sol" target="_blank">token/ERC20/MineableToken.sol</a></div></div><div class="index"><h2>Index</h2><ul><li><a href="token_ERC20_MineableToken.html#Commit">Commit</a></li><li><a href="token_ERC20_MineableToken.html#Withdraw">Withdraw</a></li><li><a href="token_ERC20_MineableToken.html#average">average</a></li><li><a href="token_ERC20_MineableToken.html#blockReward">blockReward</a></li><li><a href="token_ERC20_MineableToken.html#commit">commit</a></li><li><a href="token_ERC20_MineableToken.html#commitmentOf">commitmentOf</a></li><li><a href="token_ERC20_MineableToken.html#getCommitment">getCommitment</a></li><li><a href="token_ERC20_MineableToken.html#getReward">getReward</a></li><li><a href="token_ERC20_MineableToken.html#signedAverage">signedAverage</a></li><li><a href="token_ERC20_MineableToken.html#totalStake">totalStake</a></li><li><a href="token_ERC20_MineableToken.html#withdraw">withdraw</a></li></ul></div><div class="reference"><h2>Reference</h2><div class="events"><h3>Events</h3><ul><li><div class="item event"><span id="Commit" class="anchor-marker"></span><h4 class="name">Commit</h4><div class="body"><code class="signature">event <strong>Commit</strong><span>(address from, uint value, uint atStake, int onBlockReward) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>from</code> - address</div><div><code>value</code> - uint</div><div><code>atStake</code> - uint</div><div><code>onBlockReward</code> - int</div></dd></dl></div></div></li><li><div class="item event"><span id="Withdraw" class="anchor-marker"></span><h4 class="name">Withdraw</h4><div class="body"><code class="signature">event <strong>Withdraw</strong><span>(address from, uint reward, uint commitment) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>from</code> - address</div><div><code>reward</code> - uint</div><div><code>commitment</code> - uint</div></dd></dl></div></div></li></ul></div><div class="functions"><h3>Functions</h3><ul><li><div class="item function"><span id="average" class="anchor-marker"></span><h4 class="name">average</h4><div class="body"><code class="signature">function <strong>average</strong><span>(uint256 a, uint256 b) </span><span>public </span><span>pure </span><span>returns  (uint256) </span></code><hr/><div class="description"><p>Calculate the average of two integer numbers, 1.5 will be rounded toward zero.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>a</code> - uint256</div><div><code>b</code> - uint256</div></dd><dt><span class="label-return">Returns:</span></dt><dd>An uint256 representing integer average</dd></dl></div></div></li><li><div class="item function"><span id="blockReward" class="anchor-marker"></span><h4 class="name">blockReward</h4><div class="body"><code class="signature">function <strong>blockReward</strong><span>() </span><span>public </span><span>view </span><span>returns  (int256) </span></code><hr/><div class="description"><p>The block reward.</p></div><dl><dt><span class="label-return">Returns:</span></dt><dd>the current block reward</dd></dl></div></div></li><li><div class="item function"><span id="commit" class="anchor-marker"></span><h4 class="name">commit</h4><div class="body"><code class="signature">function <strong>commit</strong><span>(uint256 _value) </span><span>public </span><span>returns  (uint256) </span></code><hr/><div class="description"><p>Commit _value for minning, the _value will be substructed from user balance and added to the stake. if user previously commited, add to an existing commitment. this is done by calling withdraw() then commit back previous commit + reward + new commit.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_value</code> - The amount to be commited.</div></dd><dt><span class="label-return">Returns:</span></dt><dd>the commit value: _value OR prevCommit + reward + _value</dd></dl></div></div></li><li><div class="item function"><span id="commitmentOf" class="anchor-marker"></span><h4 class="name">commitmentOf</h4><div class="body"><code class="signature">function <strong>commitmentOf</strong><span>(address _miner) </span><span>public </span><span>view </span><span>returns  (uint256) </span></code><hr/><div class="description"><p>Gets the commitment of the specified address.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_miner</code> - The address to query the the commitment Of</div></dd><dt><span class="label-return">Returns:</span></dt><dd>the amount commited.</dd></dl></div></div></li><li><div class="item function"><span id="getCommitment" class="anchor-marker"></span><h4 class="name">getCommitment</h4><div class="body"><code class="signature">function <strong>getCommitment</strong><span>(address _miner) </span><span>public </span><span>view </span><span>returns  (uint256, uint256, uint256, int256) </span></code><hr/><div class="description"><p>Gets the all fields for the commitment of the specified address.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_miner</code> - The address to query the the commitment Of</div></dd><dt><span class="label-return">Returns:</span></dt><dd>{ &quot;uint256 value&quot;: the amount commited. &quot;uint256 onBlockNumber&quot;: block number of commitment. &quot;uint256 atStake&quot;: stake when commited. &quot;int256 onBlockReward&quot;: block reward when commited. }</dd></dl></div></div></li><li><div class="item function"><span id="getReward" class="anchor-marker"></span><h4 class="name">getReward</h4><div class="body"><code class="signature">function <strong>getReward</strong><span>(address _miner) </span><span>public </span><span>view </span><span>returns  (uint256) </span></code><hr/><div class="description"><p>Calculate the reward if withdraw() happans on this block, The reward is calculated by the formula: (numberOfBlocks) * (effectiveBlockReward) * (commitment.value) / (effectiveStake) effectiveBlockReward is the average between the block reward during commit and the block reward during the call effectiveStake is the average between the stake during the commit and the stake during call (liniar aproximation).</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_miner</code> - address</div></dd><dt><span class="label-return">Returns:</span></dt><dd>An uint256 representing the reward amount</dd></dl></div></div></li><li><div class="item function"><span id="signedAverage" class="anchor-marker"></span><h4 class="name">signedAverage</h4><div class="body"><code class="signature">function <strong>signedAverage</strong><span>(int256 a, int256 b) </span><span>public </span><span>pure </span><span>returns  (int256) </span></code><hr/><div class="description"><p>Calculate the average of two signed integers numbers, 1.5 will be toward zero.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>a</code> - int256</div><div><code>b</code> - int256</div></dd><dt><span class="label-return">Returns:</span></dt><dd>An int256 representing integer average</dd></dl></div></div></li><li><div class="item function"><span id="totalStake" class="anchor-marker"></span><h4 class="name">totalStake</h4><div class="body"><code class="signature">function <strong>totalStake</strong><span>() </span><span>public </span><span>view </span><span>returns  (uint256) </span></code><hr/><div class="description"><p>The total stake.</p></div><dl><dt><span class="label-return">Returns:</span></dt><dd>the total stake</dd></dl></div></div></li><li><div class="item function"><span id="withdraw" class="anchor-marker"></span><h4 class="name">withdraw</h4><div class="body"><code class="signature">function <strong>withdraw</strong><span>() </span><span>public </span><span>returns  (uint256, uint256) </span></code><hr/><div class="description"><p>Withdraw reward.</p></div><dl><dt><span class="label-return">Returns:</span></dt><dd>{ &quot;uint256 reward&quot;: the new supply &quot;uint256 commitmentValue&quot;: the commitment to be returned }</dd></dl></div></div></li></ul></div></div></div>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="token_ERC20_MineableM5Token.html">← MineableM5Token</a><a class="docs-next button" href="token_ERC20_MintableToken.html">MintableToken →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/MonetaryCoin/" class="nav-home"><img src="/MonetaryCoin/img/symbol-monetarycoin.png" alt="MonetaryCoin" width="66" height="58"/></a><div><h5>Docs</h5><a href="#">API Reference</a><a href="https://blog.zeppelin.solutions/guides/home">Guides</a></div><div><h5>Community</h5><a href="https:/monetarycoin.org/" target="_blank">Chat on Slack</a></div><div><h5>More</h5><a href="https://monetarycoin.org">Blog</a><a href="https://github.com/Monetary-Foundation/MonetaryCoin">GitHub</a><a class="github-button" href="https://github.com/Monetary-Foundation/MonetaryCoin" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://monetarycoin.org" target="_blank" class="fbOpenSource"><img src="/MonetaryCoin/img/logo-monetarycoin.png" alt="MonetaryCoin" width="170" height="45"/></a><section class="copyright">Copyright © 2018 Monetary foundation</section></footer></div></body></html>